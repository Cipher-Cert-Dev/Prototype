{"ast":null,"code":"import { useMemo } from 'react';\nimport { useTransactionsContext } from '../providers';\nimport { useEthers } from './useEthers';\n/**\n * `useTransactions` hook returns a list `transactions`. This list contains\n * all transactions that were sent using {@link useContractFunction} and {@link useSendTransaction}.\n * Transactions are stored in local storage and the status is rechecked on every new block.\n *\n * Each transaction has following type:\n *\n * ```\n * export interface StoredTransaction {\n *   transaction: TransactionResponse\n *   submittedAt: number\n *   receipt?: TransactionReceipt\n *   lastCheckedBlockNumber?: number\n *   transactionName?: string\n *   originalTransaction?: TransactionResponse\n * }\n * ```\n *\n * @see [Transaction Response](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionResponse)\n * @see [Transaction Receipt](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt)\n * @public\n */\nexport function useTransactions() {\n  var queryParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _useEthers = useEthers(),\n    defaultChainId = _useEthers.chainId,\n    account = _useEthers.account;\n  var _useTransactionsConte = useTransactionsContext(),\n    addTransaction = _useTransactionsConte.addTransaction,\n    transactions = _useTransactionsConte.transactions;\n  var _chainId = queryParams.chainId;\n  var chainId = useMemo(function () {\n    return _chainId !== null && _chainId !== void 0 ? _chainId : defaultChainId;\n  }, [_chainId, defaultChainId]);\n  var filtered = useMemo(function () {\n    var _a;\n    if (chainId === undefined || !account) {\n      return [];\n    }\n    return ((_a = transactions[chainId]) !== null && _a !== void 0 ? _a : []).filter(function (x) {\n      return x.transaction.from === account;\n    });\n  }, [transactions, chainId, account]);\n  return {\n    transactions: filtered,\n    addTransaction: addTransaction\n  };\n}","map":{"version":3,"names":["useMemo","useTransactionsContext","useEthers","useTransactions","queryParams","arguments","length","undefined","_useEthers","defaultChainId","chainId","account","_useTransactionsConte","addTransaction","transactions","_chainId","filtered","_a","filter","x","transaction","from"],"sources":["D:\\CC\\test\\node_modules\\@usedapp\\core\\src\\hooks\\useTransactions.ts"],"sourcesContent":["import { useMemo } from 'react'\nimport { QueryParams } from '../constants/type/QueryParams'\nimport { useTransactionsContext } from '../providers'\nimport { useEthers } from './useEthers'\n\n/**\n * `useTransactions` hook returns a list `transactions`. This list contains\n * all transactions that were sent using {@link useContractFunction} and {@link useSendTransaction}.\n * Transactions are stored in local storage and the status is rechecked on every new block.\n *\n * Each transaction has following type:\n *\n * ```\n * export interface StoredTransaction {\n *   transaction: TransactionResponse\n *   submittedAt: number\n *   receipt?: TransactionReceipt\n *   lastCheckedBlockNumber?: number\n *   transactionName?: string\n *   originalTransaction?: TransactionResponse\n * }\n * ```\n *\n * @see [Transaction Response](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionResponse)\n * @see [Transaction Receipt](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionReceipt)\n * @public\n */\nexport function useTransactions(queryParams: QueryParams = {}) {\n  const { chainId: defaultChainId, account } = useEthers()\n  const { addTransaction, transactions } = useTransactionsContext()\n  const { chainId: _chainId } = queryParams\n\n  const chainId = useMemo(() => _chainId ?? defaultChainId, [_chainId, defaultChainId])\n\n  const filtered = useMemo(() => {\n    if (chainId === undefined || !account) {\n      return []\n    }\n    return (transactions[chainId] ?? []).filter((x) => x.transaction.from === account)\n  }, [transactions, chainId, account])\n\n  return {\n    transactions: filtered,\n    addTransaction,\n  }\n}\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,OAAO;AAE/B,SAASC,sBAAsB,QAAQ,cAAc;AACrD,SAASC,SAAS,QAAQ,aAAa;AAEvC;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAM,SAAUC,eAAeA,CAAA,EAA8B;EAAA,IAA7BC,WAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAA2B,EAAE;EAC3D,IAAAG,UAAA,GAA6CN,SAAS,EAAE;IAAvCO,cAAc,GAAAD,UAAA,CAAvBE,OAAO;IAAkBC,OAAO,GAAAH,UAAA,CAAPG,OAAO;EACxC,IAAAC,qBAAA,GAAyCX,sBAAsB,EAAE;IAAzDY,cAAc,GAAAD,qBAAA,CAAdC,cAAc;IAAEC,YAAY,GAAAF,qBAAA,CAAZE,YAAY;EACpC,IAAiBC,QAAQ,GAAKX,WAAW,CAAjCM,OAAO;EAEf,IAAMA,OAAO,GAAGV,OAAO,CAAC;IAAA,OAAMe,QAAQ,aAARA,QAAQ,cAARA,QAAQ,GAAIN,cAAc;EAAA,GAAE,CAACM,QAAQ,EAAEN,cAAc,CAAC,CAAC;EAErF,IAAMO,QAAQ,GAAGhB,OAAO,CAAC,YAAK;;IAC5B,IAAIU,OAAO,KAAKH,SAAS,IAAI,CAACI,OAAO,EAAE;MACrC,OAAO,EAAE;;IAEX,OAAO,CAAC,CAAAM,EAAA,GAAAH,YAAY,CAACJ,OAAO,CAAC,cAAAO,EAAA,cAAAA,EAAA,GAAI,EAAE,EAAEC,MAAM,CAAC,UAACC,CAAC;MAAA,OAAKA,CAAC,CAACC,WAAW,CAACC,IAAI,KAAKV,OAAO;IAAA,EAAC;EACpF,CAAC,EAAE,CAACG,YAAY,EAAEJ,OAAO,EAAEC,OAAO,CAAC,CAAC;EAEpC,OAAO;IACLG,YAAY,EAAEE,QAAQ;IACtBH,cAAc,EAAdA;GACD;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}