{"ast":null,"code":"import _slicedToArray from \"D:/CC/prototype/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useReducer } from 'react';\nimport pickBy from 'lodash.pickby';\nimport { DEFAULT_CONFIG } from '../../model/config/default';\nimport { ConfigContext } from './context';\nimport { configReducer } from './reducer';\n/**\n * We strip supplied config of undefined fields because it can easily break TS assumptions.\n *\n * Illustrative example:\n *\n * type FullConf = { something: string }\n * type PartConf = Partial<FullConf>\n *\n * const defaultConf: FullConf = { something: 'default' }\n * const suppliedConf: PartConf = { something: undefined }\n * const conf: FullConf = {...defaultConf, ...suppliedConf}\n * conf.something.toString() // OK according to TS, breaks on runtime.\n */\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nvar noUndefined = function noUndefined(x) {\n  return x !== undefined;\n};\nexport function ConfigProvider(_ref) {\n  var config = _ref.config,\n    children = _ref.children;\n  var _a;\n  var configWithDefaults = Object.assign(Object.assign(Object.assign({}, DEFAULT_CONFIG), pickBy(config, noUndefined)), {\n    bufferGasLimitPercentage: undefined,\n    gasLimitBufferPercentage: (_a = config.gasLimitBufferPercentage) !== null && _a !== void 0 ? _a : config.bufferGasLimitPercentage,\n    notifications: Object.assign(Object.assign({}, DEFAULT_CONFIG.notifications), pickBy(config.notifications, noUndefined))\n  });\n  var _useReducer = useReducer(configReducer, configWithDefaults),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    reducedConfig = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  return _jsx(ConfigContext.Provider, {\n    value: {\n      config: reducedConfig,\n      updateConfig: dispatch\n    },\n    children: children\n  });\n}","map":{"version":3,"names":["useReducer","pickBy","DEFAULT_CONFIG","ConfigContext","configReducer","noUndefined","x","undefined","ConfigProvider","_ref","config","children","configWithDefaults","Object","assign","bufferGasLimitPercentage","gasLimitBufferPercentage","_a","notifications","_useReducer","_useReducer2","_slicedToArray","reducedConfig","dispatch","_jsx","Provider","value","updateConfig"],"sources":["D:\\CC\\prototype\\node_modules\\@usedapp\\core\\src\\providers\\config\\provider.tsx"],"sourcesContent":["import { ReactNode, useReducer } from 'react'\nimport pickBy from 'lodash.pickby'\nimport { Config, FullConfig } from '../../constants'\nimport { DEFAULT_CONFIG } from '../../model/config/default'\nimport { ConfigContext } from './context'\nimport { configReducer } from './reducer'\n\ninterface ConfigProviderProps {\n  children: ReactNode\n  config: Config\n}\n\n/**\n * We strip supplied config of undefined fields because it can easily break TS assumptions.\n *\n * Illustrative example:\n *\n * type FullConf = { something: string }\n * type PartConf = Partial<FullConf>\n *\n * const defaultConf: FullConf = { something: 'default' }\n * const suppliedConf: PartConf = { something: undefined }\n * const conf: FullConf = {...defaultConf, ...suppliedConf}\n * conf.something.toString() // OK according to TS, breaks on runtime.\n */\n\n/**\n * @internal Intended for internal use - use it on your own risk\n */\nconst noUndefined = (x: any) => x !== undefined\nexport function ConfigProvider({ config, children }: ConfigProviderProps) {\n  const configWithDefaults: FullConfig = {\n    ...DEFAULT_CONFIG,\n    ...pickBy(config, noUndefined),\n    bufferGasLimitPercentage: undefined,\n    gasLimitBufferPercentage: config.gasLimitBufferPercentage ?? config.bufferGasLimitPercentage,\n    notifications: {\n      ...DEFAULT_CONFIG.notifications,\n      ...pickBy(config.notifications, noUndefined),\n    },\n  }\n  const [reducedConfig, dispatch] = useReducer(configReducer, configWithDefaults)\n  return <ConfigContext.Provider value={{ config: reducedConfig, updateConfig: dispatch }} children={children} />\n}\n"],"mappings":";;AAAA,SAAoBA,UAAU,QAAQ,OAAO;AAC7C,OAAOC,MAAM,MAAM,eAAe;AAElC,SAASC,cAAc,QAAQ,4BAA4B;AAC3D,SAASC,aAAa,QAAQ,WAAW;AACzC,SAASC,aAAa,QAAQ,WAAW;AAOzC;;;;;;;;;;;;;AAcA;;;AAGA,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,CAAM;EAAA,OAAKA,CAAC,KAAKC,SAAS;AAAA;AAC/C,OAAM,SAAUC,cAAcA,CAAAC,IAAA,EAA0C;EAAA,IAAvCC,MAAM,GAAAD,IAAA,CAANC,MAAM;IAAEC,QAAQ,GAAAF,IAAA,CAARE,QAAQ;;EAC/C,IAAMC,kBAAkB,GAAAC,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACnBZ,cAAc,GACdD,MAAM,CAACS,MAAM,EAAEL,WAAW,CAAC;IAC9BU,wBAAwB,EAAER,SAAS;IACnCS,wBAAwB,EAAE,CAAAC,EAAA,GAAAP,MAAM,CAACM,wBAAwB,cAAAC,EAAA,cAAAA,EAAA,GAAIP,MAAM,CAACK,wBAAwB;IAC5FG,aAAa,EAAAL,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACRZ,cAAc,CAACgB,aAAa,GAC5BjB,MAAM,CAACS,MAAM,CAACQ,aAAa,EAAEb,WAAW,CAAC;EAAA,EAE/C;EACD,IAAAc,WAAA,GAAkCnB,UAAU,CAACI,aAAa,EAAEQ,kBAAkB,CAAC;IAAAQ,YAAA,GAAAC,cAAA,CAAAF,WAAA;IAAxEG,aAAa,GAAAF,YAAA;IAAEG,QAAQ,GAAAH,YAAA;EAC9B,OAAOI,IAAA,CAACrB,aAAa,CAACsB,QAAQ;IAACC,KAAK,EAAE;MAAEhB,MAAM,EAAEY,aAAa;MAAEK,YAAY,EAAEJ;IAAQ,CAAE;IAAEZ,QAAQ,EAAEA;EAAQ,EAAI;AACjH"},"metadata":{},"sourceType":"module","externalDependencies":[]}