{"ast":null,"code":"import _regeneratorRuntime from\"D:/CC/test/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/CC/test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/CC/test/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Web3 from'web3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var contractABI=[{\"inputs\":[],\"name\":\"getMessage\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}];var contractAddress='0x4496aeACe25394FE319bd261e93B4099CF92AdA9';function App(){var _ref,_ref2;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),web3=_useState2[0],setWeb3=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),contract=_useState4[0],setContract=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var calloT=function calloT(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var web3Instance;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!window.ethereum){_context.next=11;break;}web3Instance=new Web3(window.ethereum);_context.prev=2;_context.next=5;return window.ethereum.request({method:'eth_requestAccounts'});case 5:setWeb3(web3Instance);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](2);console.error('User denied account access');case 11:case\"end\":return _context.stop();}},_callee,null,[[2,8]]);}))).apply(this,arguments);};useEffect(function(){var _loadC;function loadC(){return(_loadC=_loadC||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var contractInstance;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(web3){try{contractInstance=new web3.eth.Contract(contractABI,contractAddress);setContract(contractInstance);}catch(error){console.error('Error initializing contract:',error);}}case 1:case\"end\":return _context2.stop();}},_callee2);}))).apply(this,arguments);}if(web3){loadC();}},[web3]);var handleMessage=function handleMessage(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;if(!contract){_context3.next=12;break;}if(!contract.methods.hasOwnProperty('getMessage')){_context3.next=9;break;}_context3.next=5;return contract.methods.getMessage().call();case 5:result=_context3.sent;setMessage(result);_context3.next=10;break;case 9:console.error('getMessage function does not exist in contract.');case 10:_context3.next=13;break;case 12:console.error('Contract not initialized.');case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](0);console.error('Error calling getMessage:',_context3.t0);case 18:case\"end\":return _context3.stop();}},_callee3,null,[[0,15]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:calloT,children:\"Conect-Wallet\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleMessage,children:\"Mint\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Message:\"}),\" \",message]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Web3","jsx","_jsx","jsxs","_jsxs","contractABI","contractAddress","App","_ref","_ref2","_useState","_useState2","_slicedToArray","web3","setWeb3","_useState3","_useState4","contract","setContract","_useState5","_useState6","message","setMessage","calloT","_asyncToGenerator","_regeneratorRuntime","mark","_callee","web3Instance","wrap","_callee$","_context","prev","next","window","ethereum","request","method","t0","console","error","stop","apply","arguments","_loadC","loadC","_callee2","contractInstance","_callee2$","_context2","eth","Contract","handleMessage","_callee3","result","_callee3$","_context3","methods","hasOwnProperty","getMessage","call","sent","className","children","onClick"],"sources":["D:/CC/test/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Web3 from 'web3';\n\nconst contractABI = [\n  {\n  \"inputs\": [],\n  \"name\": \"getMessage\",\n  \"outputs\": [\n    {\n      \"internalType\": \"string\",\n      \"name\": \"\",\n      \"type\": \"string\"\n    }\n  ],\n  \"stateMutability\": \"pure\",\n  \"type\": \"function\"\n}\n\n];\n\nconst contractAddress = '0x4496aeACe25394FE319bd261e93B4099CF92AdA9'; \n\nfunction App() {\n  const [web3, setWeb3] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [message, setMessage] = useState('');\n\n\n\n  const calloT = async () => {\n    if (window.ethereum) {\n      const web3Instance = new Web3(window.ethereum);\n      try {\n        await window.ethereum.request({ method: 'eth_requestAccounts' });\n        setWeb3(web3Instance);\n      } catch (error) {\n        console.error('User denied account access');\n      }\n    }\n  };\n\n  useEffect(() => {\n    async function loadC() {\n      if (web3) {\n        try {\n          const contractInstance = new web3.eth.Contract(contractABI, contractAddress);\n          setContract(contractInstance);\n        } catch (error) {\n          console.error('Error initializing contract:', error);\n        }\n      }\n    }\n  \n    if (web3) {\n      loadC();\n    }\n  }, [web3]);\n  \n  \n  \n  const handleMessage = async () => {\n    try {\n      if (contract) {\n        if (contract.methods.hasOwnProperty('getMessage')) {\n          const result = await contract.methods.getMessage().call();\n          setMessage(result);\n        } else {\n          console.error('getMessage function does not exist in contract.');\n        }\n      } else {\n        console.error('Contract not initialized.');\n      }\n    } catch (error) {\n      console.error('Error calling getMessage:', error);\n    }\n  };\n\n  \n  \n\n  return (\n    <div className=\"App\">\n      <button onClick={calloT}>Conect-Wallet</button>\n      <button onClick={handleMessage}>Mint</button>\n      <div>\n        <h1>Message:</h1> {message}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}