{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useMemo } from 'react';\nimport { ConfigProvider } from './config';\nimport { MultiChainStateProvider } from './chainState';\nimport { useConfig } from '../hooks';\nimport { NotificationsProvider } from './notifications/provider';\nimport { TransactionProvider } from './transactions/provider';\nimport { LocalMulticallProvider } from './LocalMulticallProvider';\nimport { ReadonlyNetworksProvider } from './network';\nimport { BlockNumbersProvider } from './blockNumber/blockNumbers';\nimport { WindowProvider } from './window';\nimport { ConnectorContextProvider } from './network/connectors/context';\n/**\n * Provides basic services for a DApp.\n * @public\n */\nexport function DAppProvider(_ref) {\n  var config = _ref.config,\n    children = _ref.children;\n  return _jsx(ConfigProvider, Object.assign({\n    config: config\n  }, {\n    children: _jsx(DAppProviderWithConfig, {\n      children: children\n    })\n  }));\n}\nvar getMulticallAddresses = function getMulticallAddresses(networks) {\n  var result = {};\n  networks === null || networks === void 0 ? void 0 : networks.forEach(function (network) {\n    return result[network.chainId] = network.multicallAddress;\n  });\n  return result;\n};\nvar getMulticall2Addresses = function getMulticall2Addresses(networks) {\n  var result = {};\n  networks === null || networks === void 0 ? void 0 : networks.forEach(function (network) {\n    if (network.multicall2Address) {\n      result[network.chainId] = network.multicall2Address;\n    }\n  });\n  return result;\n};\nfunction DAppProviderWithConfig(_ref2) {\n  var children = _ref2.children;\n  var _useConfig = useConfig(),\n    multicallAddresses = _useConfig.multicallAddresses,\n    networks = _useConfig.networks,\n    multicallVersion = _useConfig.multicallVersion;\n  var defaultAddresses = useMemo(function () {\n    return multicallVersion === 1 ? getMulticallAddresses(networks) : getMulticall2Addresses(networks);\n  }, [networks, multicallVersion]);\n  var multicallAddressesMerged = useMemo(function () {\n    return Object.assign(Object.assign({}, defaultAddresses), multicallAddresses);\n  }, [defaultAddresses, multicallAddresses]);\n  return _jsx(WindowProvider, {\n    children: _jsx(ReadonlyNetworksProvider, {\n      children: _jsx(ConnectorContextProvider, {\n        children: _jsx(BlockNumbersProvider, {\n          children: _jsx(LocalMulticallProvider, {\n            children: _jsx(MultiChainStateProvider, Object.assign({\n              multicallAddresses: multicallAddressesMerged\n            }, {\n              children: _jsx(NotificationsProvider, {\n                children: _jsx(TransactionProvider, {\n                  children: children\n                })\n              })\n            }))\n          })\n        })\n      })\n    })\n  });\n}","map":{"version":3,"names":["useMemo","ConfigProvider","MultiChainStateProvider","useConfig","NotificationsProvider","TransactionProvider","LocalMulticallProvider","ReadonlyNetworksProvider","BlockNumbersProvider","WindowProvider","ConnectorContextProvider","DAppProvider","_ref","config","children","_jsx","Object","assign","DAppProviderWithConfig","getMulticallAddresses","networks","result","forEach","network","chainId","multicallAddress","getMulticall2Addresses","multicall2Address","_ref2","_useConfig","multicallAddresses","multicallVersion","defaultAddresses","multicallAddressesMerged"],"sources":["D:\\CC\\prototype\\node_modules\\@usedapp\\core\\src\\providers\\DAppProvider.tsx"],"sourcesContent":["import { ReactNode, useMemo } from 'react'\nimport { Config, Chain } from '../constants'\nimport { ConfigProvider } from './config'\nimport { MultiChainStateProvider } from './chainState'\nimport { useConfig } from '../hooks'\nimport { NotificationsProvider } from './notifications/provider'\nimport { TransactionProvider } from './transactions/provider'\nimport { LocalMulticallProvider } from './LocalMulticallProvider'\nimport { ReadonlyNetworksProvider } from './network'\nimport { BlockNumbersProvider } from './blockNumber/blockNumbers'\nimport { WindowProvider } from './window'\nimport { ConnectorContextProvider } from './network/connectors/context'\n\nexport interface DAppProviderProps {\n  children?: ReactNode\n  /**\n   * Configuration of the DApp. See {@link Config} for more details.\n   */\n  config: Config\n}\n\n/**\n * Provides basic services for a DApp.\n * @public\n */\nexport function DAppProvider({ config, children }: DAppProviderProps) {\n  return (\n    <ConfigProvider config={config}>\n      <DAppProviderWithConfig>{children}</DAppProviderWithConfig>\n    </ConfigProvider>\n  )\n}\n\ninterface WithConfigProps {\n  children: ReactNode\n}\n\nconst getMulticallAddresses = (networks: Chain[] | undefined) => {\n  const result: { [index: number]: string } = {}\n  networks?.forEach((network) => (result[network.chainId] = network.multicallAddress))\n  return result\n}\n\nconst getMulticall2Addresses = (networks: Chain[] | undefined) => {\n  const result: { [index: number]: string } = {}\n  networks?.forEach((network) => {\n    if (network.multicall2Address) {\n      result[network.chainId] = network.multicall2Address\n    }\n  })\n  return result\n}\n\nfunction DAppProviderWithConfig({ children }: WithConfigProps) {\n  const { multicallAddresses, networks, multicallVersion } = useConfig()\n  const defaultAddresses = useMemo(\n    () => (multicallVersion === 1 ? getMulticallAddresses(networks) : getMulticall2Addresses(networks)),\n    [networks, multicallVersion]\n  )\n  const multicallAddressesMerged = useMemo(() => ({ ...defaultAddresses, ...multicallAddresses }), [\n    defaultAddresses,\n    multicallAddresses,\n  ])\n\n  return (\n    <WindowProvider>\n      <ReadonlyNetworksProvider>\n        <ConnectorContextProvider>\n          <BlockNumbersProvider>\n            <LocalMulticallProvider>\n              <MultiChainStateProvider multicallAddresses={multicallAddressesMerged}>\n                <NotificationsProvider>\n                  <TransactionProvider>{children}</TransactionProvider>\n                </NotificationsProvider>\n              </MultiChainStateProvider>\n            </LocalMulticallProvider>\n          </BlockNumbersProvider>\n        </ConnectorContextProvider>\n      </ReadonlyNetworksProvider>\n    </WindowProvider>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}